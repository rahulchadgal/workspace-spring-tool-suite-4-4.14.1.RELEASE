package com.example.onlineApiTest;

import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.ResponseEntity;
import org.springframework.web.client.RestTemplate;
import org.testng.annotations.Test;
import org.testng.log4testng.Logger;

public class CrudOnlineApi {
	private String responsebody;
	final static Logger logger = Logger.getLogger(TestNg.class);
	private RestTemplate restTemplate;
	private ResponseEntity<String> response;
	
	@Test
	public void addValues() {
		String addURI = "https://crudcrud.com/api/2c75d0e8d07f493fa7e343ac3e3a4a54";
		//logger.info("Get URL :" + addURI);
		System.out.println("addURI :" + addURI);
		
		HttpHeaders headers = new HttpHeaders();
		headers.add("Accept", "application/json");
		headers.add("Content-Type", "application/json");

	//	logger.info("Add URL :" + addURI);
		String jsonBody = "{\"name\":\"zozo100\",\"salary\":\"123\",\"age\":\"23\"}";
		System.out.println("\n\n" + jsonBody);
		HttpEntity<String> entity = new HttpEntity<String>(jsonBody, headers);

		response = this.restTemplate.postForEntity(addURI, entity, String.class);
	}
	
	@Test
	public void getValues() {
		String getURI = "https://crudcrud.com/api/2c75d0e8d07f493fa7e343ac3e3a4a54";
		logger.info("Get URL :" + getURI);
		System.out.println("getURI :" + getURI);
		
		ResponseEntity<String> response= restTemplate.getForEntity(getURI, String.class);
		System.out.println("response :" + response);
	}
}
