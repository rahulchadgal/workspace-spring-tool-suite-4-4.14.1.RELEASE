package com.example.onlineApiTest;

import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.client.RestTemplate;
import org.testng.Assert;
import org.testng.annotations.Test;

import com.fasterxml.jackson.core.JsonParser;

public class TestNg {
	
	@Test
	public void addEmployee() {
		String addURI = "http://dummy.restapiexample.com/api/v1/create";
		HttpHeaders headers = new HttpHeaders();
		headers.add("Accept", "application/json");
		headers.add("Content-Type", "application/json");
		String jsonBody = "{\"name\":\"zozo100\",\"salary\":\"123\",\"age\":\"23\"}";
		HttpEntity<String> entity = new HttpEntity<String>(jsonBody, headers);
		
		RestTemplate restTemplate = new RestTemplate();
		ResponseEntity<String> response =restTemplate.postForEntity(addURI, entity, String.class);
		
		//JSONParser parser = new JSONParser(); 
		//JsonObject jsonResponseObject = new JsonParser().parse(response); 
		JsonObject jsonResponseObject = JsonParser.).getAsJsonObject();
		String employeeId = jsonResponseObject.get("id").toString(); 
		
		Assert.assertEquals(response.getStatusCode(), HttpStatus.OK);
		Assert.assertTrue(responseBody.contains(employeeId));
		
		
	}
}
